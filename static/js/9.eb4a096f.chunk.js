(this.webpackJsonpcheck=this.webpackJsonpcheck||[]).push([[9],{472:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(33),c=n(31);t.a=function(e){return Object(i.b)((function(e){return{auth:e.firebase.auth}}))((function(t){return t.auth.uid?r.a.createElement(e,t):r.a.createElement(c.a,{to:"/"})}))}},498:function(e,t,n){e.exports={"profile-wrapper":"Profile_profile-wrapper__1heMc","my-quizes-item":"Profile_my-quizes-item__2tLut","no-data-message":"Profile_no-data-message__38dMA"}},506:function(e,t,n){"use strict";n.r(t);var a=n(72),r=n(73),i=n(74),c=n(75),s=n(0),u=n.n(s),l=n(28),o=n(33),m=n(472),p=n(41),f=n(499),y=n(508),h=function(e){var t=e.children,n=t.map((function(e){return u.a.createElement(f.a,{eventKey:e.props.title,title:e.props.title,key:e.props.title},e)}));return u.a.createElement(y.a,{defaultActiveKey:t[0].title},n)},g=n(497),d=n.n(g),E=n(498),v=n.n(E),M=function(e){var t=e.data;return e.isFetching?u.a.createElement(p.a,null):t?u.a.createElement("div",null,u.a.createElement("p",null,u.a.createElement("span",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u044b\u0445 \u0442\u0435\u0441\u0442\u043e\u0432:")," ",t.quantity),u.a.createElement("p",null,u.a.createElement("span",null,"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442:")," ",t.average),u.a.createElement("p",null,u.a.createElement("span",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u043f\u044b\u0442\u043e\u043a:")," ",t.attempts)):u.a.createElement("div",{className:v.a["no-data-message"]},"\u0412\u044b \u0435\u0449\u0435 \u043d\u0435 \u043f\u0440\u043e\u0448\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u0430...")},S=function(e){var t=e.data;return e.isFetching?u.a.createElement(p.a,null):t&&0!==t.length?u.a.createElement("ul",{className:"my-quizes-list"},t.map((function(e){return u.a.createElement("li",{className:v.a["my-quizes-item"],key:e.createdAt.toDate()},u.a.createElement("p",null,"\u0422\u0435\u043c\u0430: ",e.description.topic),u.a.createElement("p",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432: ",e.sheet.length),u.a.createElement("p",null,"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f:",d()(e.createdAt.toDate()).format("DD YYYY, hh:mm")))}))):u.a.createElement("div",{className:v.a["no-data-message"]},"\u0423 \u0432\u0430\u0441 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0445 \u0442\u0435\u0441\u0442\u043e\u0432...")},_=function(e){var t=e.myStats,n=e.myQuizes,a=e.isFetchingMyStats,r=e.isFetchingMyQuizes;return u.a.createElement("div",{className:v.a["profile-wrapper"]},u.a.createElement(h,null,u.a.createElement(M,{data:t,isFetching:a,title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),u.a.createElement(S,{data:n,isFetching:r,title:"\u041c\u043e\u0438 \u0442\u0435\u0441\u0442\u044b"})))},b=function(e){return{type:"IS_FETCHING_MY_STATS",payload:e}},z=function(e){return{type:"IS_FETCHING_MY_QUIZES",payload:e}},F=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).componentDidMount=function(){e.props.getMyStats(),e.props.getMyQuizes()},e.componentWillUnmount=function(){e.props.clearMyData()},e}return Object(r.a)(n,[{key:"render",value:function(){return u.a.createElement(_,{myStats:this.props.myStats,isFetchingMyStats:this.props.isFetchingMyStats,myQuizes:this.props.myQuizes,isFetchingMyQuizes:this.props.isFetchingMyQuizes})}}]),n}(u.a.Component),Q={getMyStats:function(){return function(e,t,n){var a=(0,n.getFirestore)(),r=t().firebase.auth.uid;e(b(!0)),a.collection("users").doc(r).get().then((function(e){return e.data()})).then((function(t){var n=Object.keys(t.stats).length;if(0!==n){var a=0,r=0;for(var i in t.stats)a+=Number(t.stats[i].bestResult),r+=Number(t.stats[i].times);var c={average:Math.floor(a/n),quantity:n,attempts:r};e(function(e){return{type:"SET_MY_STATS",payload:e}}(c))}})).catch((function(e){return console.log(e)})).finally((function(){return e(b(!1))}))}},getMyQuizes:function(){return function(e,t,n){var a=(0,n.getFirestore)(),r=t().firebase.auth.uid;e(z(!0)),a.collection("users").doc(r).get().then((function(e){return e.data()})).then((function(t){var n=t.myQuizes,r=[];n&&0!==n.length&&n.forEach((function(e){var t=a.collection("privateQuizes").doc(e).get().then((function(e){return e.data()}));r.push(t)})),Promise.all(r).then((function(t){return e({type:"SET_MY_QUIZES",payload:t})}))})).catch((function(e){return console.log(e)})).finally((function(){return e(z(!1))}))}},clearMyData:function(){return{type:"CLEAR_MY_DATA"}}};t.default=Object(l.compose)(Object(o.b)((function(e){var t=e.profile;return{myStats:t.myStats,myQuizes:t.myQuizes,isFetchingMyStats:t.isFetchingMyStats,isFetchingMyQuizes:t.isFetchingMyQuizes}}),Q),m.a)(F)}}]);
//# sourceMappingURL=9.eb4a096f.chunk.js.map